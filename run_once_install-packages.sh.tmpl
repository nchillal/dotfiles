#!/usr/bin/env bash
set -euo pipefail

echo "Installing Homebrew packages..."

# Check if brew exists
if ! command -v brew >/dev/null 2>&1; then
    echo "Homebrew not found, skipping Brewfile install."
    exit 0
fi

# Use the rendered chezmoi sourceDir to locate Brewfile
BREWFILE="{{ .chezmoi.sourceDir }}/Brewfile"

if [[ ! -f "$BREWFILE" ]]; then
    echo "No Brewfile found at $BREWFILE, skipping."
    exit 0
fi

brew bundle install --file "$BREWFILE"
echo "Homebrew packages installed successfully."